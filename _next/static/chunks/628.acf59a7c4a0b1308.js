"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[628],{3568:(e,t,r)=>{r.d(t,{r5:()=>n,yV:()=>s,Q4:()=>l,bW:()=>o,l6:()=>i,Op:()=>a,NQ:()=>c}),r(4309);let o=async()=>(console.info("\uD83D\uDD04 User Favorites API disabled - using localStorage only"),[]),s=async(e,t,r)=>(console.info("\uD83D\uDD04 Add to Favorites API disabled - using localStorage only"),{success:!0}),a=async(e,t,r)=>(console.info("\uD83D\uDD04 Remove from Favorites API disabled - using localStorage only"),{success:!0}),l=async()=>(console.info("\uD83D\uDD04 User Cart API disabled - using localStorage only"),[]),n=async(e,t,r,o)=>(console.info("\uD83D\uDD04 Add to Cart API disabled - using localStorage only"),{success:!0}),i=async(e,t,r)=>(console.info("\uD83D\uDD04 Remove from Cart API disabled - using localStorage only"),{success:!0}),c=async(e,t,r,o)=>(console.info("\uD83D\uDD04 Update Cart Quantity API disabled - using localStorage only"),{success:!0})},3628:(e,t,r)=>{r.r(t),r.d(t,{useLikeStore:()=>l});var o=r(5453),s=r(6786),a=r(3568);let l=(0,o.v)()((0,s.Zr)((e,t)=>({items:[],requireAuth:e=>!!localStorage.getItem("token")||(null==e||e(),!1),addToLikes:async(r,o)=>{if(t().requireAuth(o))try{await (0,a.yV)(r.id,r.selectedColor,r.selectedSize),e(e=>e.items.find(e=>e.id===r.id&&e.selectedColor===r.selectedColor&&e.selectedSize===r.selectedSize)?e:{items:[...e.items,r]})}catch(t){console.error("Add to favorites failed:",t),e(e=>e.items.find(e=>e.id===r.id&&e.selectedColor===r.selectedColor&&e.selectedSize===r.selectedSize)?e:{items:[...e.items,r]})}},removeFromLikes:async(t,r,o)=>{try{await (0,a.Op)(t,r,o)}catch(e){console.error("Remove from favorites failed:",e)}e(e=>({items:e.items.filter(e=>e.id!==t||e.selectedColor!==r||e.selectedSize!==o)}))},clearLikes:()=>{e({items:[]})},clearUserData:()=>{e({items:[]})},loadUserFavorites:async()=>{if(t().requireAuth())try{let t=await (0,a.bW)();e({items:t||[]})}catch(e){console.error("Load user favorites failed:",e)}},getTotalItems:()=>localStorage.getItem("token")?t().items.length:0,isItemLiked:(e,r,o)=>t().items.some(t=>t.id===e&&t.selectedColor===r&&t.selectedSize===o)}),{name:(e=>{{let t=localStorage.getItem("token");if(t)try{let r=JSON.parse(atob(t.split(".")[1]));return"".concat(e,"-").concat(r.sub||r.id||"anonymous")}catch(e){}}return"".concat(e,"-anonymous")})("shopease-likes"),storage:(0,s.KU)(()=>localStorage)}))},6786:(e,t,r)=>{function o(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var o;let s=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),a=null!=(o=r.getItem(e))?o:null;return a instanceof Promise?a.then(s):s(a)},setItem:(e,o)=>r.setItem(e,JSON.stringify(o,null==t?void 0:t.replacer)),removeItem:e=>r.removeItem(e)}}r.d(t,{KU:()=>o,Zr:()=>a});let s=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>s(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>s(t)(e)}}},a=(e,t)=>(r,a,l)=>{let n,i={storage:o(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},c=!1,d=new Set,u=new Set,m=i.storage;if(!m)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...e)},a,l);let g=()=>{let e=i.partialize({...a()});return m.setItem(i.name,{state:e,version:i.version})},f=l.setState;l.setState=(e,t)=>{f(e,t),g()};let v=e((...e)=>{r(...e),g()},a,l);l.getInitialState=()=>v;let y=()=>{var e,t;if(!m)return;c=!1,d.forEach(e=>{var t;return e(null!=(t=a())?t:v)});let o=(null==(t=i.onRehydrateStorage)?void 0:t.call(i,null!=(e=a())?e:v))||void 0;return s(m.getItem.bind(m))(i.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===i.version)return[!1,e.state];else{if(i.migrate){let t=i.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[o,s]=e;if(r(n=i.merge(s,null!=(t=a())?t:v),!0),o)return g()}).then(()=>{null==o||o(n,void 0),n=a(),c=!0,u.forEach(e=>e(n))}).catch(e=>{null==o||o(void 0,e)})};return l.persist={setOptions:e=>{i={...i,...e},e.storage&&(m=e.storage)},clearStorage:()=>{null==m||m.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>c,onHydrate:e=>(d.add(e),()=>{d.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},i.skipHydration||y(),n||v}}}]);