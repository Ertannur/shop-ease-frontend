(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{229:(e,r,t)=>{"use strict";t.d(r,{default:()=>i});var s=t(5155),a=t(2115),o=t(5695),l=t(489);function i(e){let{children:r}=e,t=(0,o.useRouter)(),i=(0,l.nc)(e=>e.user),n=(0,l.nc)(e=>e.accessToken),[c,d]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(()=>{if(localStorage.getItem("token")||i||n)return d(!1);t.replace("/login"),d(!1)})()},[t,i,n]),c)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-2"}),(0,s.jsx)("p",{children:"Y\xfckleniyor..."})]})}):(0,s.jsx)(s.Fragment,{children:r})}},489:(e,r,t)=>{"use strict";t.d(r,{nc:()=>o,Wn:()=>i}),t(7652);var s=t(5453),a=t(4309);let o=(0,s.v)((e,r)=>({user:null,accessToken:null,refreshToken:null,setSession:(r,t)=>{t&&(a.HM.setAccess(t),localStorage.setItem("token",t)),e({user:r,accessToken:t,refreshToken:null})},clearSession:()=>{a.HM.clearAccess(),a.HM.clearRefresh(),localStorage.removeItem("token"),t.e(135).then(t.bind(t,9135)).then(e=>{e.useCartStore.getState().clearUserData()}),t.e(628).then(t.bind(t,3628)).then(e=>{e.useLikeStore.getState().clearUserData()}),e({user:null,accessToken:null,refreshToken:null})},isAuthed:()=>!!(r().user||a.HM.getAccess())}));{let e=localStorage.getItem("token");e&&o.setState({accessToken:e})}var l=t(5695);function i(){let e=o(e=>e.clearSession),r=(0,l.useRouter)();return()=>{e(),r.push("/login")}}},1469:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{default:function(){return n},getImageProps:function(){return i}});let s=t(8229),a=t(8883),o=t(3063),l=s._(t(1193));function i(e){let{props:r}=(0,a.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920],imageSizes:[16,32,48,64,96,128,256,384],path:"/shop-ease-frontend/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,t]of Object.entries(r))void 0===t&&delete r[e];return{props:r}}let n=o.Image},3628:(e,r,t)=>{"use strict";t.r(r),t.d(r,{useLikeStore:()=>l});var s=t(5453),a=t(6786),o=t(3568);let l=(0,s.v)()((0,a.Zr)((e,r)=>({items:[],requireAuth:e=>!!localStorage.getItem("token")||(null==e||e(),!1),addToLikes:async(t,s)=>{if(r().requireAuth(s))try{await (0,o.yV)(t.id,t.selectedColor,t.selectedSize),e(e=>e.items.find(e=>e.id===t.id&&e.selectedColor===t.selectedColor&&e.selectedSize===t.selectedSize)?e:{items:[...e.items,t]})}catch(r){console.error("Add to favorites failed:",r),e(e=>e.items.find(e=>e.id===t.id&&e.selectedColor===t.selectedColor&&e.selectedSize===t.selectedSize)?e:{items:[...e.items,t]})}},removeFromLikes:async(r,t,s)=>{try{await (0,o.Op)(r,t,s)}catch(e){console.error("Remove from favorites failed:",e)}e(e=>({items:e.items.filter(e=>e.id!==r||e.selectedColor!==t||e.selectedSize!==s)}))},clearLikes:()=>{e({items:[]})},clearUserData:()=>{e({items:[]})},loadUserFavorites:async()=>{if(r().requireAuth())try{let r=await (0,o.bW)();e({items:r||[]})}catch(e){console.error("Load user favorites failed:",e)}},getTotalItems:()=>localStorage.getItem("token")?r().items.length:0,isItemLiked:(e,t,s)=>r().items.some(r=>r.id===e&&r.selectedColor===t&&r.selectedSize===s)}),{name:(e=>{{let r=localStorage.getItem("token");if(r)try{let t=JSON.parse(atob(r.split(".")[1]));return"".concat(e,"-").concat(t.sub||t.id||"anonymous")}catch(e){}}return"".concat(e,"-anonymous")})("shopease-likes"),storage:(0,a.KU)(()=>localStorage)}))},4309:(e,r,t)=>{"use strict";t.d(r,{rO:()=>a,FH:()=>o,GT:()=>i,HM:()=>l});var s=t(3464);let a={favorites:"/api/User/Favorites",cart:"/api/User/Cart",addToFavorites:"/api/User/Favorites/Add",removeFromFavorites:"/api/User/Favorites/Remove",addToCart:"/api/User/Cart/Add",removeFromCart:"/api/User/Cart/Remove",updateCartQuantity:"/api/User/Cart/Update"},o=s.A.create({baseURL:"https://eticaretapi-gghdgef9bzameteu.switzerlandnorth-01.azurewebsites.net/api",withCredentials:!1,headers:{"Content-Type":"application/json",Accept:"application/json"}});o.interceptors.request.use(e=>{let r=localStorage.getItem("token");if(r){var t;e.headers=null!=(t=e.headers)?t:{},e.headers.Authorization="Bearer ".concat(r)}return e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>{var r;return(null==(r=e.response)?void 0:r.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)});let l={getAccess:()=>localStorage.getItem("token"),setAccess:e=>{localStorage.setItem("token",e)},clearAccess:()=>{localStorage.removeItem("token")},getRefresh:()=>null,setRefresh:()=>{},clearRefresh:()=>{}},i=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e)},4875:(e,r,t)=>{"use strict";t.d(r,{x3:()=>s.useCartStore,e6:()=>a.useLikeStore,xG:()=>i});var s=t(9135),a=t(3628),o=t(5453),l=t(6786);let i=(0,o.v)()((0,l.Zr)((e,r)=>({orderData:null,orderHistory:[],setOrderData:r=>e({orderData:r}),clearOrderData:()=>e({orderData:null}),addToOrderHistory:t=>{e({orderHistory:[...r().orderHistory,t]})},getOrderHistory:()=>r().orderHistory}),{name:"order-storage"}))},5695:(e,r,t)=>{"use strict";var s=t(8999);t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},5778:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var s=t(5155);t(2115);var a=t(6874),o=t.n(a),l=t(6766),i=t(4875),n=t(4309),c=t(229);let d=()=>{let e=(0,i.e6)(e=>e.items),r=(0,i.e6)(e=>e.removeFromLikes),t=(0,i.x3)(e=>e.addToCart),a=[{name:"Anasayfa",href:"/"},{name:"Beğendiklerim",href:"#"}];return 0===e.length?(0,s.jsx)(c.default,{children:(0,s.jsx)("div",{className:"container py-8 min-h-[60vh] flex flex-col items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("svg",{className:"w-24 h-24 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"Beğendiğiniz \xdcr\xfcn Yok"}),(0,s.jsx)("p",{className:"text-gray-500 mb-6",children:"Beğendiğiniz \xfcr\xfcnler burada g\xf6r\xfcnecek"}),(0,s.jsx)(o(),{href:"/products",className:"bg-black text-white px-6 py-3 rounded-md hover:bg-gray-800 transition-colors",children:"\xdcr\xfcnleri Keşfet"})]})})}):(0,s.jsx)(c.default,{children:(0,s.jsxs)("div",{className:"container py-8",children:[(0,s.jsx)("nav",{className:"mb-8",children:(0,s.jsx)("ol",{className:"flex space-x-2 text-sm",children:a.map((e,r)=>(0,s.jsxs)("li",{className:"flex items-center",children:[r>0&&(0,s.jsx)("span",{className:"mx-2 text-gray-400",children:"/"}),r===a.length-1?(0,s.jsx)("span",{className:"text-gray-900 font-medium",children:e.name}):(0,s.jsx)(o(),{href:e.href,className:"text-gray-500 hover:text-gray-700",children:e.name})]},e.name))})}),(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Beğendiklerim"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(e=>(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:[(0,s.jsx)("div",{className:"relative h-64 bg-gray-100",children:(0,s.jsx)(l.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg mb-2",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Renk: ",e.selectedColor," | Beden: ",e.selectedSize]}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900 mb-4",children:(0,n.GT)(e.price)}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>t({id:e.id,name:e.name,price:e.price,image:e.image,selectedColor:e.selectedColor,selectedSize:e.selectedSize,quantity:1}),className:"flex-1 bg-black text-white py-2 px-4 rounded-md hover:bg-gray-800 transition-colors text-sm font-medium",children:"Sepete Ekle"}),(0,s.jsx)("button",{onClick:()=>r(e.id,e.selectedColor,e.selectedSize),className:"p-2 text-red-500 hover:text-red-700 transition-colors",title:"Beğenilerden Kaldır",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]},"".concat(e.id,"-").concat(e.selectedColor,"-").concat(e.selectedSize)))})]})})}},6766:(e,r,t)=>{"use strict";t.d(r,{default:()=>a.a});var s=t(1469),a=t.n(s)},7652:(e,r,t)=>{"use strict";t.d(r,{MI:()=>y,UB:()=>b});var s=t(4309);let{Axios:a,AxiosError:o,CanceledError:l,isCancel:i,CancelToken:n,VERSION:c,all:d,Cancel:m,isAxiosError:u,spread:h,toFormData:g,AxiosHeaders:f,HttpStatusCode:x,formToJSON:p,getAdapter:v,mergeConfig:k}=t(3464).A,y=async(e,r)=>{try{let t=await s.FH.post("/Auth/login",{email:e,password:r});if(!t.data.success)throw Error(t.data.message||"Login failed");return t.data}catch(e){if(console.error("Login API Error:",e),e instanceof o){var t,a;if(null==(a=e.response)||null==(t=a.data)?void 0:t.message)throw Error(e.response.data.message)}if(e instanceof Error)throw Error(e.message||"Network error occurred");throw Error("Network error occurred")}},b=async e=>{try{let r=await s.FH.post("/Auth/register",e);if(!r.data.success)throw Error(r.data.message||"Register failed");return r.data}catch(e){if(console.error("Register API Error:",e),e instanceof o){var r,t;if(null==(t=e.response)||null==(r=t.data)?void 0:r.message)throw Error(e.response.data.message)}if(e instanceof Error)throw Error(e.message||"Network error occurred");throw Error("Network error occurred")}}},9736:(e,r,t)=>{Promise.resolve().then(t.bind(t,5778))}},e=>{e.O(0,[873,63,135,441,964,358],()=>e(e.s=9736)),_N_E=e.O()}]);