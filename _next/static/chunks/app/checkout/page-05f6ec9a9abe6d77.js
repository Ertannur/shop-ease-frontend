(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{229:(e,r,s)=>{"use strict";s.d(r,{default:()=>n});var a=s(5155),t=s(2115),o=s(5695),l=s(489);function n(e){let{children:r}=e,s=(0,o.useRouter)(),n=(0,l.nc)(e=>e.user),d=(0,l.nc)(e=>e.accessToken),[c,i]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{(()=>{if(localStorage.getItem("token")||n||d)return i(!1);s.replace("/login"),i(!1)})()},[s,n,d]),c)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-2"}),(0,a.jsx)("p",{children:"Y\xfckleniyor..."})]})}):(0,a.jsx)(a.Fragment,{children:r})}},489:(e,r,s)=>{"use strict";s.d(r,{nc:()=>o,Wn:()=>n}),s(7652);var a=s(5453),t=s(4309);let o=(0,a.v)((e,r)=>({user:null,accessToken:null,refreshToken:null,setSession:(r,s)=>{s&&(t.HM.setAccess(s),localStorage.setItem("token",s)),e({user:r,accessToken:s,refreshToken:null})},clearSession:()=>{t.HM.clearAccess(),t.HM.clearRefresh(),localStorage.removeItem("token"),s.e(135).then(s.bind(s,9135)).then(e=>{e.useCartStore.getState().clearUserData()}),s.e(628).then(s.bind(s,3628)).then(e=>{e.useLikeStore.getState().clearUserData()}),e({user:null,accessToken:null,refreshToken:null})},isAuthed:()=>!!(r().user||t.HM.getAccess())}));{let e=localStorage.getItem("token");e&&o.setState({accessToken:e})}var l=s(5695);function n(){let e=o(e=>e.clearSession),r=(0,l.useRouter)();return()=>{e(),r.push("/login")}}},1073:(e,r,s)=>{Promise.resolve().then(s.bind(s,9301))},4309:(e,r,s)=>{"use strict";s.d(r,{rO:()=>t,FH:()=>o,GT:()=>n,HM:()=>l});var a=s(3464);let t={favorites:"/api/User/Favorites",cart:"/api/User/Cart",addToFavorites:"/api/User/Favorites/Add",removeFromFavorites:"/api/User/Favorites/Remove",addToCart:"/api/User/Cart/Add",removeFromCart:"/api/User/Cart/Remove",updateCartQuantity:"/api/User/Cart/Update"},o=a.A.create({baseURL:"https://eticaretapi-gghdgef9bzameteu.switzerlandnorth-01.azurewebsites.net/api",withCredentials:!1,headers:{"Content-Type":"application/json",Accept:"application/json"}});o.interceptors.request.use(e=>{let r=localStorage.getItem("token");if(r){var s;e.headers=null!=(s=e.headers)?s:{},e.headers.Authorization="Bearer ".concat(r)}return e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>{var r;return(null==(r=e.response)?void 0:r.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)});let l={getAccess:()=>localStorage.getItem("token"),setAccess:e=>{localStorage.setItem("token",e)},clearAccess:()=>{localStorage.removeItem("token")},getRefresh:()=>null,setRefresh:()=>{},clearRefresh:()=>{}},n=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e)},5695:(e,r,s)=>{"use strict";var a=s(8999);s.o(a,"useRouter")&&s.d(r,{useRouter:function(){return a.useRouter}})},7652:(e,r,s)=>{"use strict";s.d(r,{MI:()=>y,UB:()=>j});var a=s(4309);let{Axios:t,AxiosError:o,CanceledError:l,isCancel:n,CancelToken:d,VERSION:c,all:i,Cancel:u,isAxiosError:m,spread:p,toFormData:h,AxiosHeaders:g,HttpStatusCode:x,formToJSON:f,getAdapter:b,mergeConfig:v}=s(3464).A,y=async(e,r)=>{try{let s=await a.FH.post("/Auth/login",{email:e,password:r});if(!s.data.success)throw Error(s.data.message||"Login failed");return s.data}catch(e){if(console.error("Login API Error:",e),e instanceof o){var s,t;if(null==(t=e.response)||null==(s=t.data)?void 0:s.message)throw Error(e.response.data.message)}if(e instanceof Error)throw Error(e.message||"Network error occurred");throw Error("Network error occurred")}},j=async e=>{try{let r=await a.FH.post("/Auth/register",e);if(!r.data.success)throw Error(r.data.message||"Register failed");return r.data}catch(e){if(console.error("Register API Error:",e),e instanceof o){var r,s;if(null==(s=e.response)||null==(r=s.data)?void 0:r.message)throw Error(e.response.data.message)}if(e instanceof Error)throw Error(e.message||"Network error occurred");throw Error("Network error occurred")}}},9301:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>d});var a=s(5155),t=s(2115),o=s(6874),l=s.n(o),n=s(229);let d=()=>{let[e,r]=(0,t.useState)({addressTitle:"",name:"",surname:"",email:"",phone:"",address:"",city:"",district:"",cardNumber:"",expiryDate:"",cvv:"",cardholderName:""}),s=e=>{let{name:s,value:a}=e.target;r(e=>({...e,[s]:a}))},o=r=>{r.preventDefault(),console.log("\xd6deme bilgileri:",e)},d={subtotal:1e3,shipping:100,total:1100};return(0,a.jsx)(n.default,{children:(0,a.jsxs)("div",{className:"container py-8",children:[(0,a.jsx)("div",{className:"flex items-center mb-8",children:(0,a.jsxs)(l(),{href:"/cart",className:"flex items-center text-gray-600 hover:text-black transition-colors",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Alışverişe Devam Et"]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-8",children:"\xd6deme"}),(0,a.jsxs)("form",{onSubmit:o,className:"space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Adres"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{type:"text",name:"addressTitle",placeholder:"Adres Başlığı",value:e.addressTitle,onChange:s,className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:border-black",required:!0}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("input",{type:"text",name:"name",placeholder:"Ad",value:e.name,onChange:s,className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:border-black",required:!0}),(0,a.jsx)("input",{type:"text",name:"surname",placeholder:"Soyad",value:e.surname,onChange:s,className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:border-black",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:e.email,onChange:s,className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:border-black",required:!0}),(0,a.jsx)("input",{type:"tel",name:"phone",placeholder:"Telefon",value:e.phone,onChange:s,className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:border-black",required:!0})]}),(0,a.jsx)("textarea",{name:"address",placeholder:"Adres",rows:3,value:e.address,onChange:s,className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:border-black resize-none",required:!0}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("input",{type:"text",name:"city",placeholder:"İl",value:e.city,onChange:s,className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:border-black",required:!0}),(0,a.jsx)("input",{type:"text",name:"district",placeholder:"İl\xe7e",value:e.district,onChange:s,className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:border-black",required:!0})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Kart Bilgileri"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{type:"text",name:"cardNumber",placeholder:"Kart Numarası",value:e.cardNumber,onChange:s,className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:border-black",maxLength:19,required:!0}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("input",{type:"text",name:"expiryDate",placeholder:"GG/AA/YYYY",value:e.expiryDate,onChange:s,className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:border-black",maxLength:10,required:!0}),(0,a.jsx)("input",{type:"text",name:"cvv",placeholder:"CVV",value:e.cvv,onChange:s,className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:border-black",maxLength:4,required:!0})]}),(0,a.jsx)("input",{type:"text",name:"cardholderName",placeholder:"Ad Soyad",value:e.cardholderName,onChange:s,className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:border-black",required:!0})]})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-black text-white py-4 rounded-md hover:bg-gray-800 transition-colors duration-300 text-lg font-medium lg:hidden",children:"\xd6deme"})]})]}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg sticky top-8",children:[(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Sipariş Toplamı"}),(0,a.jsxs)("span",{children:[d.subtotal," TL"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Kargo"}),(0,a.jsxs)("span",{children:[d.shipping," TL"]})]}),(0,a.jsx)("div",{className:"border-t pt-4",children:(0,a.jsxs)("div",{className:"flex justify-between font-semibold text-lg",children:[(0,a.jsx)("span",{children:"Toplam"}),(0,a.jsxs)("span",{children:[d.total," TL"]})]})})]}),(0,a.jsx)("button",{type:"submit",form:"checkout-form",onClick:o,className:"hidden lg:block w-full bg-black text-white py-4 rounded-md hover:bg-gray-800 transition-colors duration-300 text-lg font-medium",children:"\xd6deme"})]})})]})]})})}}},e=>{e.O(0,[873,441,964,358],()=>e(e.s=1073)),_N_E=e.O()}]);