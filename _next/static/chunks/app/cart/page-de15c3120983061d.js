(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{489:(e,t,r)=>{"use strict";r.d(t,{nc:()=>l,Wn:()=>o}),r(7652);var s=r(5453),a=r(4309);let l=(0,s.v)((e,t)=>({user:null,accessToken:null,refreshToken:null,setSession:(t,r)=>{r&&(a.HM.setAccess(r),localStorage.setItem("token",r)),e({user:t,accessToken:r,refreshToken:null})},clearSession:()=>{a.HM.clearAccess(),a.HM.clearRefresh(),localStorage.removeItem("token"),r.e(135).then(r.bind(r,9135)).then(e=>{e.useCartStore.getState().clearUserData()}),r.e(628).then(r.bind(r,3628)).then(e=>{e.useLikeStore.getState().clearUserData()}),e({user:null,accessToken:null,refreshToken:null})},isAuthed:()=>!!(t().user||a.HM.getAccess())}));{let e=localStorage.getItem("token");e&&l.setState({accessToken:e})}var i=r(5695);function o(){let e=l(e=>e.clearSession),t=(0,i.useRouter)();return()=>{e(),t.push("/login")}}},923:(e,t,r)=>{Promise.resolve().then(r.bind(r,2843))},1469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return n},getImageProps:function(){return o}});let s=r(8229),a=r(8883),l=r(3063),i=s._(r(1193));function o(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920],imageSizes:[16,32,48,64,96,128,256,384],path:"/shop-ease-frontend/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let n=l.Image},2843:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(5155);r(2115);var a=r(6874),l=r.n(a),i=r(6766),o=r(5695),n=r(6012),c=r(489),d=r(4309);let m=()=>{let e=(0,o.useRouter)(),t=(0,n.x)(e=>e.items),r=(0,n.x)(e=>e.updateQuantity),a=(0,n.x)(e=>e.removeFromCart),m=(0,n.x)(e=>e.getTotalPrice),u=(0,c.nc)(e=>e.isAuthed()),h=m(),x=h>500?0:29.99,g=[{name:"Anasayfa",href:"/"},{name:"Sepetim",href:"#"}];return 0===t.length?(0,s.jsx)("div",{className:"container py-8 min-h-[60vh] flex flex-col items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("svg",{className:"w-24 h-24 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5H19M7 13v6a1 1 0 001 1h10a1 1 0 001-1v-6M7 13L5.4 5M17 13v6M9 19v2m6-2v2"})}),(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"Sepetiniz Boş"}),(0,s.jsx)("p",{className:"text-gray-500 mb-6",children:"Alışverişe başlamak i\xe7in \xfcr\xfcnlerimizi keşfedin"}),(0,s.jsx)(l(),{href:"/products",className:"bg-black text-white px-6 py-3 rounded-md hover:bg-gray-800 transition-colors",children:"Alışverişe Başla"})]})}):(0,s.jsxs)("div",{className:"container py-8",children:[(0,s.jsx)("nav",{className:"mb-8",children:(0,s.jsx)("ol",{className:"flex space-x-2 text-sm",children:g.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-center",children:[t>0&&(0,s.jsx)("span",{className:"mx-2 text-gray-400",children:"/"}),t===g.length-1?(0,s.jsx)("span",{className:"text-gray-900 font-medium",children:e.name}):(0,s.jsx)(l(),{href:e.href,className:"text-gray-500 hover:text-gray-700",children:e.name})]},e.name))})}),(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Sepetim"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-2 space-y-4",children:t.map(e=>(0,s.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"w-24 h-24 relative bg-gray-100 rounded-lg overflow-hidden",children:(0,s.jsx)(i.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),(0,s.jsx)("button",{onClick:()=>a(e.id,e.selectedColor,e.selectedSize),className:"text-gray-400 hover:text-red-500 transition-colors",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-3",children:["Renk: ",e.selectedColor," | Beden: ",e.selectedSize]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Miktar:"}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("button",{onClick:()=>r(e.id,e.selectedColor,e.selectedSize,e.quantity-1),className:"w-8 h-8 flex items-center justify-center border border-gray-300 rounded hover:bg-gray-100",children:"-"}),(0,s.jsx)("span",{className:"w-8 text-center",children:e.quantity}),(0,s.jsx)("button",{onClick:()=>r(e.id,e.selectedColor,e.selectedSize,e.quantity+1),className:"w-8 h-8 flex items-center justify-center border border-gray-300 rounded hover:bg-gray-100",children:"+"})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-lg font-semibold",children:(0,d.GT)(e.price*e.quantity)}),e.quantity>1&&(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,d.GT)(e.price)," x ",e.quantity]})]})]})]})]})},"".concat(e.id,"-").concat(e.selectedColor,"-").concat(e.selectedSize)))}),(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 sticky top-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Sipariş \xd6zeti"}),(0,s.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Ara Toplam"}),(0,s.jsx)("span",{children:(0,d.GT)(h)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Kargo"}),(0,s.jsx)("span",{children:0===x?"\xdccretsiz":(0,d.GT)(x)})]}),0===x&&(0,s.jsxs)("p",{className:"text-sm text-green-600",children:[(0,d.GT)(500)," \xfczeri \xfccretsiz kargo!"]}),(0,s.jsx)("hr",{}),(0,s.jsxs)("div",{className:"flex justify-between font-semibold text-lg",children:[(0,s.jsx)("span",{children:"Toplam"}),(0,s.jsx)("span",{children:(0,d.GT)(h+x)})]})]}),(0,s.jsx)(l(),{href:"/checkout",onClick:t=>{u||(t.preventDefault(),alert("Satın alma işlemini tamamlamak i\xe7in giriş yapmanız gerekiyor."),e.push("/login"))},className:"w-full bg-black text-white py-3 rounded-md hover:bg-gray-800 transition-colors text-center block font-medium",children:"Satın Al"}),(0,s.jsx)(l(),{href:"/products",className:"w-full text-center text-gray-600 hover:text-gray-800 py-2 text-sm block mt-3",children:"Alışverişe Devam Et"})]})})]})]})}},3628:(e,t,r)=>{"use strict";r.r(t),r.d(t,{useLikeStore:()=>i});var s=r(5453),a=r(6786),l=r(3568);let i=(0,s.v)()((0,a.Zr)((e,t)=>({items:[],requireAuth:e=>!!localStorage.getItem("token")||(null==e||e(),!1),addToLikes:async(r,s)=>{if(t().requireAuth(s))try{await (0,l.yV)(r.id,r.selectedColor,r.selectedSize),e(e=>e.items.find(e=>e.id===r.id&&e.selectedColor===r.selectedColor&&e.selectedSize===r.selectedSize)?e:{items:[...e.items,r]})}catch(t){console.error("Add to favorites failed:",t),e(e=>e.items.find(e=>e.id===r.id&&e.selectedColor===r.selectedColor&&e.selectedSize===r.selectedSize)?e:{items:[...e.items,r]})}},removeFromLikes:async(t,r,s)=>{try{await (0,l.Op)(t,r,s)}catch(e){console.error("Remove from favorites failed:",e)}e(e=>({items:e.items.filter(e=>e.id!==t||e.selectedColor!==r||e.selectedSize!==s)}))},clearLikes:()=>{e({items:[]})},clearUserData:()=>{e({items:[]})},loadUserFavorites:async()=>{if(t().requireAuth())try{let t=await (0,l.bW)();e({items:t||[]})}catch(e){console.error("Load user favorites failed:",e)}},getTotalItems:()=>localStorage.getItem("token")?t().items.length:0,isItemLiked:(e,r,s)=>t().items.some(t=>t.id===e&&t.selectedColor===r&&t.selectedSize===s)}),{name:(e=>{{let t=localStorage.getItem("token");if(t)try{let r=JSON.parse(atob(t.split(".")[1]));return"".concat(e,"-").concat(r.sub||r.id||"anonymous")}catch(e){}}return"".concat(e,"-anonymous")})("shopease-likes"),storage:(0,a.KU)(()=>localStorage)}))},4309:(e,t,r)=>{"use strict";r.d(t,{rO:()=>a,FH:()=>l,GT:()=>o,HM:()=>i});var s=r(3464);let a={favorites:"/api/User/Favorites",cart:"/api/User/Cart",addToFavorites:"/api/User/Favorites/Add",removeFromFavorites:"/api/User/Favorites/Remove",addToCart:"/api/User/Cart/Add",removeFromCart:"/api/User/Cart/Remove",updateCartQuantity:"/api/User/Cart/Update"},l=s.A.create({baseURL:"https://eticaretapi-gghdgef9bzameteu.switzerlandnorth-01.azurewebsites.net/api",withCredentials:!1,headers:{"Content-Type":"application/json",Accept:"application/json"}});l.interceptors.request.use(e=>{let t=localStorage.getItem("token");if(t){var r;e.headers=null!=(r=e.headers)?r:{},e.headers.Authorization="Bearer ".concat(t)}return e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)});let i={getAccess:()=>localStorage.getItem("token"),setAccess:e=>{localStorage.setItem("token",e)},clearAccess:()=>{localStorage.removeItem("token")},getRefresh:()=>null,setRefresh:()=>{},clearRefresh:()=>{}},o=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e)},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},6012:(e,t,r)=>{"use strict";r.d(t,{e:()=>a.useLikeStore,x:()=>s.useCartStore});var s=r(9135),a=r(3628)},6766:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(1469),a=r.n(s)},7652:(e,t,r)=>{"use strict";r.d(t,{MI:()=>y,UB:()=>b});var s=r(4309);let{Axios:a,AxiosError:l,CanceledError:i,isCancel:o,CancelToken:n,VERSION:c,all:d,Cancel:m,isAxiosError:u,spread:h,toFormData:x,AxiosHeaders:g,HttpStatusCode:f,formToJSON:p,getAdapter:v,mergeConfig:j}=r(3464).A,y=async(e,t)=>{try{let r=await s.FH.post("/Auth/login",{email:e,password:t});if(!r.data.success)throw Error(r.data.message||"Login failed");return r.data}catch(e){if(console.error("Login API Error:",e),e instanceof l){var r,a;if(null==(a=e.response)||null==(r=a.data)?void 0:r.message)throw Error(e.response.data.message)}if(e instanceof Error)throw Error(e.message||"Network error occurred");throw Error("Network error occurred")}},b=async e=>{try{let t=await s.FH.post("/Auth/register",e);if(!t.data.success)throw Error(t.data.message||"Register failed");return t.data}catch(e){if(console.error("Register API Error:",e),e instanceof l){var t,r;if(null==(r=e.response)||null==(t=r.data)?void 0:t.message)throw Error(e.response.data.message)}if(e instanceof Error)throw Error(e.message||"Network error occurred");throw Error("Network error occurred")}}}},e=>{e.O(0,[873,63,135,441,964,358],()=>e(e.s=923)),_N_E=e.O()}]);