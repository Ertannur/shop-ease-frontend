"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[244],{229:(e,t,r)=>{r.d(t,{default:()=>i});var s=r(5155),a=r(2115),o=r(5695),l=r(489);function i(e){let{children:t}=e,r=(0,o.useRouter)(),i=(0,l.nc)(e=>e.user),n=(0,l.nc)(e=>e.accessToken),[c,d]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(()=>{if(localStorage.getItem("token")||i||n)return d(!1);r.replace("/login"),d(!1)})()},[r,i,n]),c)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-2"}),(0,s.jsx)("p",{children:"Y\xfckleniyor..."})]})}):(0,s.jsx)(s.Fragment,{children:t})}},489:(e,t,r)=>{r.d(t,{nc:()=>o,Wn:()=>i}),r(7652);var s=r(5453),a=r(4309);let o=(0,s.v)((e,t)=>({user:null,accessToken:null,refreshToken:null,setSession:(t,r)=>{r&&(a.HM.setAccess(r),localStorage.setItem("token",r)),e({user:t,accessToken:r,refreshToken:null})},clearSession:()=>{a.HM.clearAccess(),a.HM.clearRefresh(),localStorage.removeItem("token"),r.e(135).then(r.bind(r,9135)).then(e=>{e.useCartStore.getState().clearUserData()}),r.e(628).then(r.bind(r,3628)).then(e=>{e.useLikeStore.getState().clearUserData()}),e({user:null,accessToken:null,refreshToken:null})},isAuthed:()=>!!(t().user||a.HM.getAccess())}));{let e=localStorage.getItem("token");e&&o.setState({accessToken:e})}var l=r(5695);function i(){let e=o(e=>e.clearSession),t=(0,l.useRouter)();return()=>{e(),t.push("/login")}}},2007:(e,t,r)=>{r.d(t,{A:()=>i});var s=r(5155),a=r(2115),o=r(6874),l=r.n(o);function i(e){let{message:t,show:r,onClose:o,position:i}=e;if((0,a.useEffect)(()=>{if(r){let e=setTimeout(()=>{o()},4e3);return()=>clearTimeout(e)}},[r,o]),!r)return null;let n=i?{position:"fixed",left:Math.min(i.x,window.innerWidth-320),top:Math.max(i.y-80,20),zIndex:9999}:{};return(0,s.jsx)("div",{style:n,className:"bg-white border border-gray-200 rounded-lg shadow-lg p-4 max-w-sm animate-in slide-in-from-top-2 duration-300",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-gray-800 mb-3",children:t}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(l(),{href:"/login",className:"bg-blue-600 text-white text-xs px-3 py-1.5 rounded hover:bg-blue-700 transition-colors",children:"Giriş Yap"}),(0,s.jsx)(l(),{href:"/register",className:"bg-gray-100 text-gray-700 text-xs px-3 py-1.5 rounded hover:bg-gray-200 transition-colors",children:"Kayıt Ol"})]})]}),(0,s.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}},3628:(e,t,r)=>{r.r(t),r.d(t,{useLikeStore:()=>l});var s=r(5453),a=r(6786),o=r(3568);let l=(0,s.v)()((0,a.Zr)((e,t)=>({items:[],requireAuth:e=>!!localStorage.getItem("token")||(null==e||e(),!1),addToLikes:async(r,s)=>{if(t().requireAuth(s))try{await (0,o.yV)(r.id,r.selectedColor,r.selectedSize),e(e=>e.items.find(e=>e.id===r.id&&e.selectedColor===r.selectedColor&&e.selectedSize===r.selectedSize)?e:{items:[...e.items,r]})}catch(t){console.error("Add to favorites failed:",t),e(e=>e.items.find(e=>e.id===r.id&&e.selectedColor===r.selectedColor&&e.selectedSize===r.selectedSize)?e:{items:[...e.items,r]})}},removeFromLikes:async(t,r,s)=>{try{await (0,o.Op)(t,r,s)}catch(e){console.error("Remove from favorites failed:",e)}e(e=>({items:e.items.filter(e=>e.id!==t||e.selectedColor!==r||e.selectedSize!==s)}))},clearLikes:()=>{e({items:[]})},clearUserData:()=>{e({items:[]})},loadUserFavorites:async()=>{if(t().requireAuth())try{let t=await (0,o.bW)();e({items:t||[]})}catch(e){console.error("Load user favorites failed:",e)}},getTotalItems:()=>localStorage.getItem("token")?t().items.length:0,isItemLiked:(e,r,s)=>t().items.some(t=>t.id===e&&t.selectedColor===r&&t.selectedSize===s)}),{name:(e=>{{let t=localStorage.getItem("token");if(t)try{let r=JSON.parse(atob(t.split(".")[1]));return"".concat(e,"-").concat(r.sub||r.id||"anonymous")}catch(e){}}return"".concat(e,"-anonymous")})("shopease-likes"),storage:(0,a.KU)(()=>localStorage)}))},4309:(e,t,r)=>{r.d(t,{rO:()=>a,FH:()=>o,GT:()=>i,HM:()=>l});var s=r(3464);let a={favorites:"/api/User/Favorites",cart:"/api/User/Cart",addToFavorites:"/api/User/Favorites/Add",removeFromFavorites:"/api/User/Favorites/Remove",addToCart:"/api/User/Cart/Add",removeFromCart:"/api/User/Cart/Remove",updateCartQuantity:"/api/User/Cart/Update"},o=s.A.create({baseURL:"https://eticaretapi-gghdgef9bzameteu.switzerlandnorth-01.azurewebsites.net/api",withCredentials:!1,headers:{"Content-Type":"application/json",Accept:"application/json"}});o.interceptors.request.use(e=>{let t=localStorage.getItem("token");if(t){var r;e.headers=null!=(r=e.headers)?r:{},e.headers.Authorization="Bearer ".concat(t)}return e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)});let l={getAccess:()=>localStorage.getItem("token"),setAccess:e=>{localStorage.setItem("token",e)},clearAccess:()=>{localStorage.removeItem("token")},getRefresh:()=>null,setRefresh:()=>{},clearRefresh:()=>{}},i=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e)},5464:(e,t,r)=>{r.d(t,{default:()=>d});var s=r(5155),a=r(6874),o=r.n(a),l=r(2115),i=r(6012),n=r(489),c=r(2007);let d=()=>{let[e,t]=(0,l.useState)(!1),[r,a]=(0,l.useState)({show:!1,message:""}),d=(0,i.x)(e=>e.getTotalItems()),h=(0,i.e)(e=>e.getTotalItems()),u=(0,n.nc)(e=>e.isAuthed()),m=(0,n.nc)(e=>e.user),g=(0,n.Wn)(),x=(null==m?void 0:m.firstName)||(null==m?void 0:m.name)||(null==m?void 0:m.email)||"Kullanıcı";return(0,l.useEffect)(()=>{t(!0)},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"container py-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(o(),{href:"/products?category=kadin",className:"hover:text-gray-600 transition-colors",children:"Kadın"}),(0,s.jsx)(o(),{href:"/products?category=erkek",className:"hover:text-gray-600 transition-colors",children:"Erkek"}),(0,s.jsx)(o(),{href:"/products?category=cocuk",className:"hover:text-gray-600 transition-colors",children:"\xc7ocuk"}),(0,s.jsx)(o(),{href:"/products?category=outlet",className:"hover:text-gray-600 transition-colors",children:"Outlet"}),(0,s.jsx)(o(),{href:"/products?category=recycle",className:"hover:text-gray-600 transition-colors",children:"Geri D\xf6n\xfcşt\xfcr"})]}),(0,s.jsx)("div",{className:"text-2xl font-bold",children:(0,s.jsx)(o(),{href:"/",children:"ShopEase"})}),(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"Ara...",className:"px-4 py-2 pr-10 border border-gray-300 rounded-md"}),(0,s.jsx)("svg",{className:"absolute right-2 top-1/2 -translate-y-1/2 cursor-pointer",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 2C5.13401 2 2 5.13401 2 9C2 12.866 5.13401 16 9 16C10.8859 16 12.5977 15.2542 13.8564 14.0414C13.8827 14.0072 13.9115 13.9742 13.9429 13.9429C13.9742 13.9115 14.0072 13.8827 14.0414 13.8564C15.2542 12.5977 16 10.8859 16 9C16 5.13401 12.866 2 9 2ZM16.0319 14.6177C17.2635 13.078 18 11.125 18 9C18 4.02944 13.9706 0 9 0C4.02944 0 0 4.02944 0 9C0 13.9706 4.02944 18 9 18C11.125 18 13.078 17.2635 14.6177 16.0319L18.2929 19.7071C18.6834 20.0976 19.3166 20.0976 19.7071 19.7071C20.0976 19.3166 20.0976 18.6834 19.7071 18.2929L16.0319 14.6177Z",fill:"black"})})]}),e&&u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"hidden md:inline-block text-sm text-gray-700 mr-2",children:["Hoş geldin, ",(0,s.jsx)("strong",{children:x})]}),(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("button",{className:"hover:opacity-70 transition-opacity flex items-center gap-2",children:(0,s.jsx)("svg",{width:"18",height:"20",viewBox:"0 0 18 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 0C11.2091 0 13 1.79086 13 4C13 6.20914 11.2091 8 9 8C6.79086 8 5 6.20914 5 4C5 1.79086 6.79086 0 9 0ZM9 2C7.89543 2 7 2.89543 7 4C7 5.10457 7.89543 6 9 6C10.1046 6 11 5.10457 11 4C11 2.89543 10.1046 2 9 2ZM9 10C13.9706 10 18 14.0294 18 19V20H16V19C16 15.134 12.866 12 9 12C5.13401 12 2 15.134 2 19V20H0V19C0 14.0294 4.02944 10 9 10Z",fill:"black"})})}),(0,s.jsx)("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:(0,s.jsxs)("div",{className:"py-2",children:[(0,s.jsxs)("div",{className:"px-4 py-2 border-b border-gray-100",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Merhaba,"}),(0,s.jsx)("p",{className:"text-sm font-medium truncate",children:x})]}),(0,s.jsx)(o(),{href:"/account",className:"block px-4 py-2 text-sm hover:bg-gray-50",children:"Hesabım"}),(0,s.jsx)("button",{onClick:g,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:"\xc7ıkış Yap"})]})})]})]}):e?(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(o(),{href:"/login",className:"text-sm hover:underline",children:"Giriş Yap"}),(0,s.jsx)("span",{className:"text-gray-300",children:"/"}),(0,s.jsx)(o(),{href:"/register",className:"text-sm hover:underline",children:"Kayıt Ol"})]}):null,(0,s.jsxs)(o(),{href:"/cart",className:"hover:opacity-70 transition-opacity relative",children:[(0,s.jsx)("svg",{width:"20",height:"22",viewBox:"0 0 20 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.2 0.4C3.38885 0.148194 3.68524 0 4 0H16C16.3148 0 16.6111 0.148194 16.8 0.4L19.8 4.4C19.9298 4.5731 20 4.78363 20 5V19C20 19.7957 19.6839 20.5587 19.1213 21.1213C18.5587 21.6839 17.7957 22 17 22H3C2.20435 22 1.44129 21.6839 0.87868 21.1213C0.31607 20.5587 0 19.7957 0 19V5C0 4.78363 0.0701779 4.5731 0.2 4.4L3.2 0.4ZM4.5 2L3 4H17L15.5 2H4.5ZM18 6H2V19C2 19.2652 2.10536 19.5196 2.29289 19.7071C2.48043 19.8946 2.73478 20 3 20H17C17.2652 20 17.5196 19.8946 17.7071 19.7071C17.8946 19.5196 18 19.2652 18 19V6ZM6 8C6.55228 8 7 8.44772 7 9C7 9.79565 7.31607 10.5587 7.87868 11.1213C8.44129 11.6839 9.20435 12 10 12C10.7956 12 11.5587 11.6839 12.1213 11.1213C12.6839 10.5587 13 9.79565 13 9C13 8.44772 13.4477 8 14 8C14.5523 8 15 8.44772 15 9C15 10.3261 14.4732 11.5979 13.5355 12.5355C12.5979 13.4732 11.3261 14 10 14C8.67392 14 7.40215 13.4732 6.46447 12.5355C5.52678 11.5979 5 10.3261 5 9C5 8.44772 5.44772 8 6 8Z",fill:"black"})}),d>0&&(0,s.jsx)("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:d})]}),(0,s.jsxs)(o(),{href:"/favorites",onClick:e=>{if(!u){e.preventDefault();let t=e.currentTarget.getBoundingClientRect();a({show:!0,message:"Beğenilerinizi g\xf6rmek i\xe7in giriş yapmanız gerekiyor.",position:{x:t.left+t.width/2,y:t.top}})}},className:"hover:opacity-70 transition-opacity relative",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),h>0&&(0,s.jsx)("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:h})]})]})]})}),(0,s.jsx)(c.A,{show:r.show,message:r.message,position:r.position,onClose:()=>a({show:!1,message:""})})]})}},5695:(e,t,r)=>{var s=r(8999);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},6012:(e,t,r)=>{r.d(t,{e:()=>a.useLikeStore,x:()=>s.useCartStore});var s=r(9135),a=r(3628)},7652:(e,t,r)=>{r.d(t,{MI:()=>y,UB:()=>j});var s=r(4309);let{Axios:a,AxiosError:o,CanceledError:l,isCancel:i,CancelToken:n,VERSION:c,all:d,Cancel:h,isAxiosError:u,spread:m,toFormData:g,AxiosHeaders:x,HttpStatusCode:p,formToJSON:f,getAdapter:v,mergeConfig:C}=r(3464).A,y=async(e,t)=>{try{let r=await s.FH.post("/Auth/login",{email:e,password:t});if(!r.data.success)throw Error(r.data.message||"Login failed");return r.data}catch(e){if(console.error("Login API Error:",e),e instanceof o){var r,a;if(null==(a=e.response)||null==(r=a.data)?void 0:r.message)throw Error(e.response.data.message)}if(e instanceof Error)throw Error(e.message||"Network error occurred");throw Error("Network error occurred")}},j=async e=>{try{let t=await s.FH.post("/Auth/register",e);if(!t.data.success)throw Error(t.data.message||"Register failed");return t.data}catch(e){if(console.error("Register API Error:",e),e instanceof o){var t,r;if(null==(r=e.response)||null==(t=r.data)?void 0:t.message)throw Error(e.response.data.message)}if(e instanceof Error)throw Error(e.message||"Network error occurred");throw Error("Network error occurred")}}}}]);